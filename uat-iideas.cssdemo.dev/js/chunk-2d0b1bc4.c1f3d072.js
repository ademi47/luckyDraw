(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b1bc4"],{"20b2":function(e,n,t){"use strict";t.r(n);t("b0c0"),t("4de4"),t("d3b7");var o=function(){var e=this,n=e._self._c;return n("div",{staticClass:"welcome-container",attrs:{id:"backdrop-page-root"}},[n("div",{staticClass:"action-wrapper"},[n("div",{staticClass:"dropdown"},[n("button",{staticClass:"create-badge-btn",attrs:{disabled:e.isLoading},on:{click:e.toggleDropdown}},[e.isLoading?n("span",[e._v("Loading Designs...")]):n("span",[e._v(" Create Backdrop Design "),n("svg",{attrs:{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708 .708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"}})])])]),e.isDropdownOpen&&!e.isLoading?n("div",{staticClass:"dropdown-menu"},[n("a",{staticClass:"dropdown-item",class:{disabled:e.isDesignCreated("Live Draw")},attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.selectOption("Live Draw")}}},[e._v("Live Draw")]),n("a",{staticClass:"dropdown-item",class:{disabled:e.isDesignCreated("Pre-Live Draw")},attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.selectOption("Pre-Live Draw")}}},[e._v("Pre-Live Draw")]),n("a",{staticClass:"dropdown-item",class:{disabled:e.isDesignCreated("Pre-Draw")},attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.selectOption("Pre-Draw")}}},[e._v("Pre-Draw")])]):e._e()])]),e.isLoading||0!==e.createdDesigns.length?e._e():n("div",{staticClass:"prompt-message"},[n("svg",{staticClass:"prompt-icon",attrs:{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M14.5 3.5C14.5 3.5 14.5 3.5 14.5 3.5C14.5 4.32843 15.1716 5 16 5H18C19.1046 5 20 5.89543 20 7V19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19V5C4 3.89543 4.89543 3 6 3H13L14.5 3.5Z",stroke:"#d1a581","stroke-width":"2","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M14 3.5H14.5L13 3H6C4.89543 3 4 3.89543 4 5V19C4 20.1046 4.89543 21 6 21H18C19.1046 21 20 20.1046 20 19V7C20 5.89543 19.1046 5 18 5H16C15.1716 5 14.5 4.32843 14.5 3.5V3.5Z",fill:"#f6e4d4"}}),n("path",{attrs:{d:"M7 8H17",stroke:"#b88e6e","stroke-width":"2","stroke-linecap":"round"}}),n("path",{attrs:{d:"M7 12H17",stroke:"#b88e6e","stroke-width":"2","stroke-linecap":"round"}}),n("path",{attrs:{d:"M7 16H12",stroke:"#b88e6e","stroke-width":"2","stroke-linecap":"round"}}),n("path",{attrs:{d:"M14.5 3.5L13 3V1.5C13 1.22386 13.2239 1 13.5 1C13.7761 1 14 1.22386 14 1.5V3.5H14.5Z",fill:"#d1a581",stroke:"#d1a581","stroke-width":"2","stroke-linejoin":"round"}})]),n("p",[e._v('Click "Create Backdrop Design" to get started')])]),n("div",{staticClass:"designs-container"},e._l(e.createdDesigns,(function(t){return n("div",{key:t.id,staticClass:"design-card",on:{click:function(n){return e.navigateToDesign(t)}}},[n("div",{staticClass:"card-preview"},[n("div",{staticClass:"backdrop-placeholder"},["Live Draw"===t.type?n("svg",{staticClass:"design-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("path",{attrs:{d:"M4.26 10.05a2.5 2.5 0 1 0-2.52 2.52"}}),n("path",{attrs:{d:"M10.05 4.26a2.5 2.5 0 1 0-5.04 0"}}),n("circle",{attrs:{cx:"12",cy:"12",r:"1"}}),n("path",{attrs:{d:"M13.95 4.26a2.5 2.5 1 1 5.04 0"}}),n("path",{attrs:{d:"M19.74 10.05a2.5 2.5 0 1 1 2.52 2.52"}}),n("path",{attrs:{d:"M13.95 19.74a2.5 2.5 0 1 0 5.04 0"}}),n("path",{attrs:{d:"M4.26 13.95a2.5 2.5 0 1 0 0 5.04"}})]):e._e(),"Pre-Live Draw"===t.type?n("svg",{staticClass:"design-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("rect",{attrs:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}}),n("line",{attrs:{x1:"16",y1:"2",x2:"16",y2:"6"}}),n("line",{attrs:{x1:"8",y1:"2",x2:"8",y2:"6"}}),n("line",{attrs:{x1:"3",y1:"10",x2:"21",y2:"10"}}),n("path",{attrs:{d:"M12 14v4h4"}}),n("path",{attrs:{d:"M12 14l4 4"}})]):e._e(),"Pre-Draw"===t.type?n("svg",{staticClass:"design-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("rect",{attrs:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}}),n("line",{attrs:{x1:"3",y1:"9",x2:"21",y2:"9"}}),n("line",{attrs:{x1:"9",y1:"21",x2:"9",y2:"9"}})]):e._e(),n("div",{staticClass:"placeholder-text"},[e._v(e._s(t.name||t.type))])])]),n("div",{staticClass:"card-footer"},[n("div",[n("div",{staticClass:"footer-title"},[e._v(e._s(t.name||t.type))]),n("div",{staticClass:"footer-subtitle"},[e._v("Backdrop Design")])]),n("div",{staticClass:"footer-dots-container"},[n("div",{staticClass:"footer-dots",on:{click:function(n){return n.stopPropagation(),e.toggleCardMenu(t.id)}}},[e._v("⋮")]),e.openMenuId===t.id?n("div",{staticClass:"card-menu"},[n("a",{staticClass:"card-menu-item",attrs:{href:"#"},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.openPreviewModal(t)}}},[e._v("Preview")]),n("a",{staticClass:"card-menu-item",attrs:{href:"#"},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.editDesign(t)}}},[e._v("Edit")]),n("a",{staticClass:"card-menu-item",attrs:{href:"#"},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),e.deleteDesign(t.id)}}},[e._v("Delete")])]):e._e()])])])})),0),e.isPreviewModalVisible?n("div",{staticClass:"modal-overlay",on:{click:e.closePreviewModal}},[n("div",{ref:"modalContent",staticClass:"modal-content",on:{click:function(e){e.stopPropagation()}}},[n("button",{staticClass:"modal-close-btn",on:{click:e.closePreviewModal}},[e._v("×")]),e.designToPreview&&e.designToPreview.template?n("div",{staticClass:"modal-preview-wrapper"},[n("div",{staticClass:"modal-preview-canvas",style:[e.getBackgroundStyle(e.designToPreview.template),{width:"960px",height:"540px",transform:"scale(".concat(e.scale,")")}]},e._l(e.designToPreview.template.fields.filter((function(e){return!e.hidden})),(function(t){return n("div",{key:t.id,staticClass:"modal-preview-field",style:e.getScaledModalFieldStyle(t)},["lucky_draw"===t.type?n("div",{staticClass:"lucky-number-container-modal"},e._l((t.textContent||"").split(""),(function(o,i){return n("span",{key:i,staticClass:"digit-box-modal",style:e.getDigitBoxStyle(t)},[e._v(" "+e._s(o)+" ")])})),0):"text"===t.type?n("span",[e._v(e._s(t.textContent))]):"image"===t.type&&t.imageUrl?n("img",{staticClass:"modal-preview-image",attrs:{src:t.imageUrl}}):e._e()])})),0)]):n("div",{staticClass:"modal-no-preview"},[n("p",[e._v("No local draft found for this design.")]),n("p",{staticClass:"small text-muted"},[e._v('Please "Edit" and "Save" the design to generate a preview.')])])])]):e._e()])},i=[],r=t("5530"),a=(t("d81d"),t("14d9"),t("25f0"),t("caad"),t("2532"),t("99af"),"\n.welcome-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-height: 100vh;\n  background-color: #f8fafc;\n  padding: 40px 20px;\n  gap: 40px;\n}\n.action-wrapper {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n.dropdown {\n  position: relative;\n  display: inline-block;\n}\n.create-badge-btn {\n  background-color: #4f46e5;\n  color: white;\n  padding: 14px 28px;\n  font-size: 16px;\n  font-weight: 500;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);\n  transition: background-color 0.2s;\n}\n.create-badge-btn:hover {\n  background-color: #4338ca;\n}\n.create-badge-btn:disabled {\n  background-color: #a5b4fc;\n  cursor: not-allowed;\n}\n.dropdown-menu {\n  display: block;\n  position: absolute;\n  background-color: #ffffff;\n  min-width: 200px;\n  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);\n  z-index: 10;\n  border-radius: 8px;\n  padding: 8px 0;\n  margin-top: 8px;\n}\n.dropdown-item {\n  color: black;\n  padding: 12px 16px;\n  text-decoration: none;\n  display: block;\n  text-align: left;\n  font-size: 15px;\n  cursor: pointer;\n}\n.dropdown-item:hover {\n  background-color: #f1f1f1;\n}\n.dropdown-item.disabled {\n  color: #a0aec0;\n  cursor: not-allowed;\n}\n.designs-container {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 24px;\n  width: 100%;\n  max-width: 1200px;\n}\n.design-card {\n  width: 250px;\n  background-color: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 8px rgba(0,0,0,0.1);\n  overflow: visible;\n  display: flex;\n  flex-direction: column;\n  transition: transform 0.2s;\n  cursor: pointer;\n}\n.design-card:hover {\n  transform: translateY(-5px);\n}\n.card-preview {\n  padding: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 220px;\n  background-color: #f8f9fa;\n  border-bottom: 1px solid #e2e8f0;\n}\n.backdrop-placeholder {\n  text-align: center;\n  color: #6c757d;\n}\n.design-icon {\n  margin-bottom: 16px;\n  color: #64748b;\n}\n.placeholder-text {\n  font-size: 14px;\n  font-weight: 500;\n  color: #4a5568;\n}\n.card-footer {\n  background-color: #ffffff;\n  color: #1e293b;\n  padding: 12px 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-top: 1px solid #e2e8f0;\n}\n.footer-title {\n  font-size: 14px;\n  font-weight: 600;\n}\n.footer-subtitle {\n  font-size: 12px;\n  color: #64748b;\n}\n.footer-dots-container {\n  position: relative;\n}\n.footer-dots {\n  font-size: 20px;\n  cursor: pointer;\n  padding: 4px 8px;\n  border-radius: 50%;\n}\n.footer-dots:hover {\n  background-color: #f1f5f9;\n}\n.card-menu {\n  position: absolute;\n  right: 0;\n  bottom: 30px;\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n  z-index: 20;\n  width: 120px;\n  padding: 8px 0;\n}\n.card-menu-item {\n  display: block;\n  padding: 10px 16px;\n  color: #333;\n  font-size: 14px;\n  text-decoration: none;\n}\n.card-menu-item:hover {\n  background-color: #f1f1f1;\n}\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.85);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  -webkit-backdrop-filter: blur(5px);\n  backdrop-filter: blur(5px);\n  padding: 20px;\n  box-sizing: border-box;\n}\n.modal-content {\n  background: transparent;\n  padding: 0;\n  border-radius: 12px;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  max-width: 100%;\n  max-height: 100%;\n}\n.modal-close-btn {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: white;\n  border: none;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  font-size: 24px;\n  font-weight: bold;\n  color: #333;\n  cursor: pointer;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.2);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n}\n.modal-preview-wrapper {\n  /* This wrapper defines the maximum area the preview can take */\n  width: 90vw;\n  height: 85vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  position: relative;\n}\n.modal-preview-canvas {\n  /* Dimensions are set in JS/Inline style, but defaults here */\n  position: relative;\n  overflow: hidden;\n  background-size: cover;\n  background-position: center;\n  box-shadow: 0 10px 30px rgba(0,0,0,0.5);\n  border-radius: 8px;\n  background-color: white;\n  transform-origin: center center;\n  flex-shrink: 0;\n}\n.modal-preview-field {\n    box-sizing: border-box;\n}\n.modal-preview-image {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n}\n.modal-no-preview {\n    background: white;\n    padding: 40px 60px;\n    border-radius: 12px;\n    text-align: center;\n    color: #4a5568;\n}\n.modal-no-preview p {\n    margin: 8px 0;\n    font-size: 16px;\n}\n.lucky-number-container-modal {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n}\n.digit-box-modal {\n    background-color: #ffffff;\n    border-radius: 12px;\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n}\n"),s={name:"CreateBackdrop",data:function(){return{isLoading:!0,isDropdownOpen:!1,createdDesigns:[],openMenuId:null,isPreviewModalVisible:!1,designToPreview:null,styleElement:null,scale:1}},created:function(){this.loadDesigns(),window.addEventListener("resize",this.updateScale)},beforeMount:function(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",this.styleElement.innerHTML=a,document.head.appendChild(this.styleElement)},mounted:function(){document.addEventListener("click",this.closeCardMenu)},beforeDestroy:function(){document.removeEventListener("click",this.closeCardMenu),window.removeEventListener("resize",this.updateScale),this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},methods:{loadDesigns:function(){var e=this;this.isLoading=!0;var n=localStorage.getItem("selectedOrganizationSysId"),t=localStorage.getItem("selectedEventSysId");if(!n||!t)return console.error("Organization or Event ID not found in local storage."),void(this.isLoading=!1);var o={ITEM:"VIEW_ALL",ORGANIZATION_SYS_ID:n,EVENT_SYS_ID:t};this.$apiCall.get(this.$apiBus.api_get_backdrop_design,{params:o}).then((function(n){"true"===n.status&&n.response&&n.response.length>0?e.createdDesigns=n.response.map((function(e){return{id:e.BACKDROP_TEMPLATE_SYS_ID,name:e.TEMPLATE_NAME,type:e.LUCKY_DRAW_TYPE}})):e.createdDesigns=[]})).catch((function(n){console.error("Error fetching backdrop designs:",n),e.createdDesigns=[]})).finally((function(){e.isLoading=!1}))},selectOption:function(e){var n=this;if(!this.isDesignCreated(e)){var t=localStorage.getItem("selectedOrganizationSysId"),o=localStorage.getItem("selectedEventSysId");if(t&&o){var i={ITEM:"ADD_UPDATE_BT_SETUP",ORGANIZATION_SYS_ID:t,BACKDROP_TEMPLATE_SYS_ID:"0",EVENT_SYS_ID:o,TEMPLATE_NAME:e,LUCKY_DRAW_TYPE:e,CREATED_BY:1};this.$apiCall.post(this.$apiBus.api_post_backdrop_design,i).then((function(t){if("true"===t.status&&t.BACKDROP_TEMPLATE_SYS_ID){var o=t.BACKDROP_TEMPLATE_SYS_ID,i={id:o,type:e,name:e};n.createdDesigns.push(i),n.isDropdownOpen=!1,sessionStorage.setItem("currentBackdropDrawType",e),sessionStorage.setItem("currentBackdropDesignType",e),n.$nextTick((function(){n.$router.push({path:"/event/event-Backdroap-Design",query:{BACKDROP_TEMPLATE_SYS_ID:i.id}})}))}else console.error("Failed to create backdrop design: The API response did not include an ID.",t)})).catch((function(e){console.error("Error calling create backdrop API:",e)}))}else console.error("Cannot create design: Organization or Event ID is missing.")}},updateScale:function(){if(this.isPreviewModalVisible){var e=960,n=540,t=.9*window.innerWidth,o=.85*window.innerHeight,i=t/e,r=o/n;this.scale=Math.min(i,r)}},getBackgroundStyle:function(e){return{backgroundColor:e.backgroundColor,backgroundImage:e.backgroundImage?"url(".concat(e.backgroundImage,")"):"none"}},getDigitBoxStyle:function(e){var n=16,t=(e.textContent||"").toString().length;if(0===t)return{};var o=15,i=e.width*n,r=e.height*n,a=o*(t-1),s=(i-a)/t,d=Math.min(s,r),l=.7*d,c="normal",p="normal";if(e.fontStyle){var g=e.fontStyle.toLowerCase();g.includes("bold")&&(c="bold"),g.includes("italic")&&(p="italic")}return{width:"".concat(d,"px"),height:"".concat(d,"px"),fontSize:"".concat(l,"px"),fontFamily:e.fontFamily||"monospace",color:e.color||"#000000",fontWeight:c,fontStyle:p,gap:"".concat(o,"px")}},getScaledModalFieldStyle:function(e){var n=16,t={position:"absolute",left:"".concat(e.x*n,"px"),top:"".concat(e.y*n,"px"),width:"".concat(e.width*n,"px"),height:"".concat(e.height*n,"px"),display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box"};if(e.borderEnabled?(t.border="".concat((e.borderWidth||0)*n,"px ").concat(e.borderStyle||"solid"," ").concat(e.borderColor||"#000"),t.borderRadius="".concat((e.cornerRadius||0)*n,"px"),"rectangle"===e.type&&(t.backgroundColor=e.backgroundColor||"transparent")):"rectangle"===e.type&&(t.backgroundColor=e.backgroundColor||"transparent"),"lucky_draw"===e.type)return t;var o="normal",i="normal";if(e.fontStyle){var a=e.fontStyle.toLowerCase();a.includes("bold")&&(o="bold"),a.includes("italic")&&(i="italic")}return Object(r["a"])(Object(r["a"])({},t),{},{fontFamily:e.fontFamily||"Roboto",fontSize:"".concat((e.fontSize||1.5)*n,"px"),color:e.color||"#000000",fontWeight:o,fontStyle:i,textAlign:"center",lineHeight:1.2,wordBreak:"break-word",whiteSpace:"pre-wrap"})},openPreviewModal:function(e){var n=this,t="dynamicBackdropTemplate_".concat(e.id),o=localStorage.getItem(t);if(o)try{var i=JSON.parse(o);i.template?e.template=i.template:e.template=i}catch(r){console.error("Failed to parse design template:",r),e.template=null}else e.template=null;this.designToPreview=e,this.isPreviewModalVisible=!0,this.$nextTick((function(){n.updateScale()}))},closePreviewModal:function(){this.isPreviewModalVisible=!1,this.designToPreview=null},toggleDropdown:function(){this.isLoading||(this.isDropdownOpen=!this.isDropdownOpen)},isDesignCreated:function(e){return this.createdDesigns.some((function(n){return n.type===e}))},navigateToDesign:function(e){sessionStorage.setItem("currentBackdropDrawType",e.type),sessionStorage.setItem("currentBackdropDesignType",e.name||e.type),this.$router.push({path:"/event/event-Backdroap-Design",query:{BACKDROP_TEMPLATE_SYS_ID:e.id}})},toggleCardMenu:function(e){this.openMenuId=this.openMenuId===e?null:e},closeCardMenu:function(e){e&&!e.target.closest(".footer-dots-container")?this.openMenuId=null:e||(this.openMenuId=null)},editDesign:function(e){this.navigateToDesign(e)},deleteDesign:function(e){var n=this,t=localStorage.getItem("selectedEventSysId");if(t){var o={ITEM:"DELETE_TEMPLATE",EVENT_SYS_ID:t,BACKDROP_TEMPLATE_SYS_ID:e};this.$apiCall.post(this.$apiBus.api_post_backdrop_design,o).then((function(t){if("true"===t.status){var o="dynamicBackdropTemplate_".concat(e);localStorage.removeItem(o),n.createdDesigns=n.createdDesigns.filter((function(n){return n.id!==e}))}else console.error("Failed to delete backdrop design:",t.message||"Unknown API error")})).catch((function(e){console.error("Error calling the delete backdrop API:",e)})).finally((function(){n.closeCardMenu()}))}else console.error("Delete failed: Event ID not found in local storage.")}}},d=s,l=t("2877"),c=Object(l["a"])(d,o,i,!1,null,null,null);n["default"]=c.exports}}]);