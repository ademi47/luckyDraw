(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a5632be"],{"1f23":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-wrapper"},[e("header",{staticClass:"app-header"},[e("div",{staticClass:"header-content"},[e("span",[t._v("Welcome to Wishing Wall")]),e("a",{staticClass:"logout-icon-wrapper",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.logout.apply(null,arguments)}}},[e("svg",{staticClass:"logout-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"}},[e("path",{attrs:{d:"M16 17v-3H9v-4h7V7l5 5-5 5zM14 2a2 2 0 0 1 2 2v2h-2V4H5v16h9v-2h2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9z"}})])])])]),e("div",{staticClass:"presentation-wrapper"},[e("div",{staticClass:"presentation-container"},[e("header",{staticClass:"page-title"},[e("div",{staticClass:"title-container"},[e("div",{staticClass:"title-spacer"}),e("h1",{staticClass:"event-title"},[t.eventLoading?[t._v(" Loading Event... ")]:t.eventName?[t._v(" "+t._s(t.eventName)+" (Wishing Wall) ")]:[t._v(" Wishing Wall ")]],2)])]),e("main",{staticClass:"main-content"},[e("transition-group",{staticClass:"testimonials-grid",attrs:{name:"fade-slide",tag:"div"}},t._l(t.displayedTestimonials,(function(s,i){return e("div",{key:s.id,staticClass:"testimonial-card",style:{animationDelay:"".concat(.1*i,"s")}},[e("p",{staticClass:"testimonial-text"},[t._v(t._s(s.message))]),e("p",{staticClass:"testimonial-author"},[t._v("- "+t._s(s.author))])])})),0),0!==t.allTestimonials.length||t.loading?t._e():e("div",{staticClass:"empty-state"},[e("p",[t._v("No approved wishes to display")])]),t.loading?e("div",{staticClass:"empty-state"},[e("p",[t._v("Loading wishes...")])]):t._e()],1)])])])},n=[],a=(s("d3b7"),s("7db0"),s("caad"),s("2532"),s("d81d"),s("fb6a"),s("14d9"),s("dfcf")),o={name:"WishingWall",components:{VueQRCodeComponent:a["a"]},data:function(){return{allTestimonials:[],displayedTestimonials:[],eventName:"",eventLoading:!1,loading:!1,event_sys_id:null,qrCode:"",currentIndex:0,messagesPerScreen:12,animationInterval:null}},mounted:function(){var t=localStorage.getItem("selectedEventSysId");if(t){try{this.event_sys_id=JSON.parse(t)}catch(e){this.event_sys_id=t}this.getEventDetails(),this.getWishingWallQRCode(),this.getApprovedWishes()}},beforeDestroy:function(){this.animationInterval&&clearInterval(this.animationInterval)},methods:{getEventDetails:function(){var t=this;if(this.event_sys_id){this.eventLoading=!0;var e={ITEM:"SPECIFIC",EVENT_SYS_ID:this.event_sys_id};this.$apiCall.get(this.$apiBus.api_get_specific_event_info,{params:e}).then((function(e){"true"===e.status&&Array.isArray(e.response)&&e.response.length>0&&e.response[0].EVENT_NAME?t.eventName=e.response[0].EVENT_NAME:(console.error("Event not found or invalid response:",e),t.eventName="")})).catch((function(e){console.error("Failed to fetch event details:",e),t.eventName=""})).finally((function(){t.eventLoading=!1}))}else this.eventLoading=!1},getWishingWallQRCode:function(){var t=this;if(this.event_sys_id){var e={ITEM:"VIEW_ALL",EVENT_SYS_ID:this.event_sys_id};this.$apiCall.get(this.$apiBus.api_get_credentials_info,{params:e}).then((function(e){if("true"===e.status&&Array.isArray(e.response)){var s=e.response.find((function(t){return t.MODULE_NAME&&t.MODULE_NAME.toLowerCase().includes("wishing wall")&&1===t.MODULE_VISIBLE_FLAG}));s&&s.QR_CODE?t.qrCode=s.QR_CODE:(console.log("Wishing Wall QR code not found or module is not visible."),t.qrCode="")}else console.log("No credentials data found in the API response:",e),t.qrCode=""})).catch((function(e){console.error("Failed to fetch QR code:",e),t.qrCode=""}))}},getApprovedWishes:function(){var t=this;if(this.event_sys_id){this.loading=!0;var e={ITEM:"VIEW_APPROVED",EVENT_SYS_ID:this.event_sys_id};this.$apiCall.get(this.$apiBus.api_get_wishing_wall_list,{params:e}).then((function(e){e.status&&"true"===e.status?(console.log("Successfully fetched approved wishes."),t.allTestimonials=e.response.map((function(t){return{id:t.WISHING_MESSAGE_SYS_ID,author:t.WISHED_BY||"Anonymous",message:t.WISHING_MESSAGE}})),t.startAnimationCycle()):(console.log("API status returned false or no wishes found:",e),t.allTestimonials=[])})).catch((function(e){t.allTestimonials=[],console.error("API call to fetch wishes failed:",e)})).finally((function(){t.loading=!1}))}},startAnimationCycle:function(){var t=this;0!==this.allTestimonials.length&&(this.showNextBatch(),this.animationInterval=setInterval((function(){t.showNextBatch()}),8e3))},showNextBatch:function(){var t=this.currentIndex,e=t+this.messagesPerScreen;this.displayedTestimonials=this.allTestimonials.slice(t,e),this.currentIndex=e>=this.allTestimonials.length?0:e},logout:function(){this.$router.push("/auth/wishingwall")}}},l=o,r=(s("829d"),s("2877")),c=Object(r["a"])(l,i,n,!1,null,"563b3a0b",null);e["default"]=c.exports},"4f7d":function(t,e,s){},"7db0":function(t,e,s){"use strict";var i=s("23e7"),n=s("b727").find,a=s("44d2"),o="find",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),i({target:"Array",proto:!0,forced:l},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a(o)},"829d":function(t,e,s){"use strict";s("4f7d")}}]);