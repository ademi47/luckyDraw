(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4de47834"],{"1cc6":function(e,t,a){e.exports=a.p+"img/setting6.da9dbb67.png"},"30bf":function(e,t,a){"use strict";a.r(t);a("99af"),a("fb6a");var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"preview-seating-page"},[t("b-card",[t("div",{staticClass:"preview-header"},[t("div",[t("h3",[t("i",{staticClass:"fas fa-eye mr-2"}),e._v("Seating Arrangement Preview")]),t("p",{staticClass:"text-muted"},[e._v("View the complete seating layout for your event")])]),t("div",{staticClass:"header-actions"},[t("button",{staticClass:"btn btn-secondary mr-2",on:{click:e.goBack}},[t("i",{staticClass:"fas fa-arrow-left mr-2"}),e._v("Back to Editor ")]),t("button",{staticClass:"btn btn-primary",on:{click:e.printLayout}},[t("i",{staticClass:"fas fa-print mr-2"}),e._v("Print Layout ")])])])]),t("b-card",{staticClass:"mt-3"},[t("div",{staticClass:"controls-container mb-3"},[t("div",{staticClass:"control-group"},[t("label",{attrs:{for:"zoom-slider"}},[e._v("Zoom:")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.zoom,expression:"zoom",modifiers:{number:!0}}],attrs:{id:"zoom-slider",type:"range",min:"0.5",max:"2",step:"0.1"},domProps:{value:e.zoom},on:{__r:function(t){e.zoom=e._n(t.target.value)},blur:function(t){return e.$forceUpdate()}}}),t("span",{staticClass:"ml-2 zoom-percentage"},[e._v(e._s(Math.round(100*e.zoom))+"%")])]),t("div",{staticClass:"control-group"},[t("label",{staticClass:"mb-0 mr-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.showCoordinates,expression:"showCoordinates"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.showCoordinates)?e._i(e.showCoordinates,null)>-1:e.showCoordinates},on:{change:function(t){var a=e.showCoordinates,s=t.target,o=!!s.checked;if(Array.isArray(a)){var n=null,i=e._i(a,n);s.checked?i<0&&(e.showCoordinates=a.concat([n])):i>-1&&(e.showCoordinates=a.slice(0,i).concat(a.slice(i+1)))}else e.showCoordinates=o}}}),e._v(" Show Coordinates ")])])]),t("div",{ref:"printArea",staticClass:"preview-layout-wrapper"},[t("div",{staticClass:"preview-layout",style:{transform:"scale(".concat(e.zoom,")")}},[t("img",{staticClass:"preview-image",attrs:{src:e.seatingPlanImage,alt:"Floor Plan Layout"}}),e._l(e.placedTables,(function(a){return t("div",{key:a.id,staticClass:"preview-table",class:[a.shape],style:{transform:"translate(".concat(a.x,"px, ").concat(a.y,"px)"),"--edge-color":a.edgeColor},on:{click:function(t){return e.selectTable(a)}}},[t("span",{staticClass:"table-number"},[e._v(e._s(a.tableNumber))]),e.showCoordinates?t("div",{staticClass:"coordinate-badge"},[e._v(" ("+e._s(Math.round(a.x))+", "+e._s(Math.round(a.y))+") ")]):e._e()])}))],2)])]),e.selectedTable?t("b-modal",{attrs:{title:"Table Details","hide-footer":""},model:{value:e.showTableDetail,callback:function(t){e.showTableDetail=t},expression:"showTableDetail"}},[t("div",{staticClass:"table-detail-content"},[t("div",{staticClass:"detail-item"},[t("strong",[e._v("Table Number:")]),t("span",{staticClass:"detail-value"},[e._v(e._s(e.selectedTable.tableNumber))])]),t("div",{staticClass:"detail-item"},[t("strong",[e._v("Position:")]),t("span",{staticClass:"detail-value"},[e._v(" X: "+e._s(Math.round(e.selectedTable.x))+"px, Y: "+e._s(Math.round(e.selectedTable.y))+"px ")])]),t("div",{staticClass:"detail-item"},[t("strong",[e._v("Shape:")]),t("span",{staticClass:"detail-value"},[e._v(e._s(e.selectedTable.shape))])]),t("div",{staticClass:"detail-item"},[t("strong",[e._v("Color:")]),t("span",{staticClass:"detail-value"},[t("span",{staticClass:"color-swatch",style:{backgroundColor:e.selectedTable.edgeColor}}),e._v(" "+e._s(e.selectedTable.edgeColor)+" ")])])]),t("div",{staticClass:"modal-footer-custom"},[t("button",{staticClass:"btn btn-secondary",on:{click:function(t){e.showTableDetail=!1}}},[e._v("Close")])])]):e._e()],1)},o=[],n=a("2909"),i=(a("4e82"),a("14d9"),a("1cc6")),r=a.n(i),l={name:"PreviewSeatingArrangement",data:function(){return{seatingPlanImage:r.a,placedTables:[],zoom:1,showCoordinates:!0,selectedTable:null,showTableDetail:!1,event_sys_id:null,pollingInterval:null}},computed:{sortedTables:function(){return Object(n["a"])(this.placedTables).sort((function(e,t){return e.tableNumber-t.tableNumber}))},localStorageKey:function(){return"seating_arrangement_".concat(this.event_sys_id)}},mounted:function(){var e=this;this.event_sys_id=JSON.parse(localStorage.getItem("selectedEventSysId")),this.loadSeatingArrangement(),window.addEventListener("storage",this.handleStorageChange),window.addEventListener("seatingArrangementUpdated",this.loadSeatingArrangement),this.pollingInterval=setInterval((function(){e.loadSeatingArrangement()}),2e3)},beforeDestroy:function(){window.removeEventListener("storage",this.handleStorageChange),window.removeEventListener("seatingArrangementUpdated",this.loadSeatingArrangement),this.pollingInterval&&clearInterval(this.pollingInterval)},methods:{loadSeatingArrangement:function(){try{var e=localStorage.getItem(this.localStorageKey);if(e){var t=JSON.parse(e);this.placedTables=t.placedTables||[],console.log("Loaded seating arrangement from localStorage:",this.placedTables)}else console.log("No saved data found in localStorage")}catch(a){console.error("Error loading from localStorage:",a),this.$bvToast.toast("Error loading seating arrangement",{title:"Error",variant:"danger",solid:!0})}},handleStorageChange:function(e){e.key===this.localStorageKey&&this.loadSeatingArrangement()},selectTable:function(e){this.selectedTable=e,this.showTableDetail=!0},goBack:function(){this.$router.push("/event/seating-arrangement")},goToEditor:function(){this.$router.push("/event/seating-arrangement")},printLayout:function(){window.print()}}},c=l,d=(a("ff31"),a("2877")),u=Object(d["a"])(c,s,o,!1,null,"08782f8c",null);t["default"]=u.exports},d419:function(e,t,a){},ff31:function(e,t,a){"use strict";a("d419")}}]);