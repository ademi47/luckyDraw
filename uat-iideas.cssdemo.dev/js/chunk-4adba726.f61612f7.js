(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4adba726"],{3835:function(t,e,n){"use strict";function a(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("14d9");function i(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,i,r,s,o=[],d=!0,c=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;d=!1}else for(;!(d=(a=r.call(n)).done)&&(o.push(a.value),o.length!==e);d=!0);}catch(u){c=!0,i=u}finally{try{if(!d&&null!=n["return"]&&(s=n["return"](),Object(s)!==s))return}finally{if(c)throw i}}return o}}var r=n("06c5");n("d9e2");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){return a(t)||i(t,e)||Object(r["a"])(t,e)||s()}},"7db0":function(t,e,n){"use strict";var a=n("23e7"),i=n("b727").find,r=n("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),a({target:"Array",proto:!0,forced:o},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(s)},"80d6":function(t,e,n){"use strict";n.r(e);n("b0c0"),n("a4d3"),n("e01a");var a=function(){var t=this,e=t._self._c;return t.event?e("div",[e("div",{staticClass:"card",staticStyle:{cursor:"default"}},[e("div",{staticClass:"p-3"},[e("div",{staticClass:"row align-items-center"},[t._m(0),e("div",{staticClass:"col-md-6 text-right"},[e("b-button",{attrs:{variant:"primary"},on:{click:t.openEdit}},[t._v("Edit")])],1)]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-3"},[e("label",[t._v("Event Name")]),e("p",[t._v(t._s(t.event.name||"-"))])]),e("div",{staticClass:"col-md-3"},[e("label",[t._v("Event Type")]),e("p",[t._v(t._s(t.event.type||"-"))])]),e("div",{staticClass:"col-md-3"},[e("label",[t._v("Event Category")]),e("p",[t._v(t._s(t.event.categoryName||"-"))])]),e("div",{staticClass:"col-md-3"},[e("label",[t._v("Venue")]),e("p",[t._v(t._s(t.event.venue||"-"))])])]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-6"},[e("label",[t._v("Address")]),e("p",[t._v(t._s(t.dynamicFullAddress))])]),e("div",{staticClass:"col-md-3"},[e("label",[t._v("Event Date")]),e("p",[t._v(t._s(t.formatDate(t.event.startDate)))])]),e("div",{staticClass:"col-md-3"},[e("label",[t._v("Country")]),e("p",[t._v(t._s(t.event.countryName||"-"))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("label",[t._v("Event Description")]),e("p",[t._v(t._s(t.event.description||"-"))])])]),e("div",{staticClass:"map-section mt-4"},[e("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[e("h5",[t._v("Event Location")]),"-"!==t.dynamicFullAddress?e("button",{staticClass:"btn btn-google-maps",on:{click:t.openInGoogleMaps}},[e("i",{staticClass:"fas fa-map-marker-alt me-1"}),e("span",{staticClass:"btn-text"},[t._v("Open in Google Maps")])]):t._e()]),e("div",{staticClass:"map-container"},[e("iframe",{ref:"mapFrame",staticStyle:{border:"0","border-radius":"8px"},attrs:{width:"100%",height:"300",allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",src:t.googleMapsEmbedUrl},on:{error:t.onMapError}})])]),e("div",{staticClass:"d-flex mt-3",staticStyle:{"justify-content":"end"}},[e("b-button",{attrs:{variant:"primary"},on:{click:t.openEdit}},[t._v("Edit")])],1)])]),e("validation-observer",{ref:"editEventObserver",scopedSlots:t._u([{key:"default",fn:function(n){var a=n.handleSubmit;return[e("b-modal",{attrs:{id:"edit-event-modal",title:"Edit Event",size:"lg","hide-footer":"",busy:t.isLoading,"no-close-on-backdrop":"","no-close-on-esc":""},model:{value:t.showEditModal,callback:function(e){t.showEditModal=e},expression:"showEditModal"}},[e("b-form",{on:{submit:function(e){return e.preventDefault(),a(t.updateEvent)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("validation-provider",{attrs:{name:"Event Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("label",[t._v("Event Name "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("b-form-input",{attrs:{state:t.getValidationState(n),placeholder:"Enter event name"},model:{value:t.editEvent.name,callback:function(e){t.$set(t.editEvent,"name",e)},expression:"editEvent.name"}}),e("b-form-invalid-feedback",[t._v(t._s(n.errors[0]))])]}}],null,!0)})],1),e("div",{staticClass:"col-md-6"},[e("validation-provider",{attrs:{name:"Event Type",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("label",[t._v("Event Type "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("b-form-select",{attrs:{state:t.getValidationState(n)},model:{value:t.editEvent.type,callback:function(e){t.$set(t.editEvent,"type",e)},expression:"editEvent.type"}},[e("option",{attrs:{value:""}},[t._v("Select")]),e("option",[t._v("Free")]),e("option",[t._v("Paid")])]),e("b-form-invalid-feedback",[t._v(t._s(n.errors[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-4"},[e("validation-provider",{attrs:{name:"Event Category",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("label",[t._v("Event Category "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("b-form-select",{attrs:{options:t.event_category_details,state:t.getValidationState(n)},model:{value:t.editEvent.category,callback:function(e){t.$set(t.editEvent,"category",e)},expression:"editEvent.category"}}),e("b-form-invalid-feedback",[t._v(t._s(n.errors[0]))])]}}],null,!0)})],1),e("div",{staticClass:"col-md-4"},[e("validation-provider",{attrs:{name:"Venue",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("label",[t._v("Venue "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("b-form-input",{attrs:{state:t.getValidationState(n),placeholder:"Enter venue name"},model:{value:t.editEvent.venue,callback:function(e){t.$set(t.editEvent,"venue",e)},expression:"editEvent.venue"}}),e("b-form-invalid-feedback",[t._v(t._s(n.errors[0]))])]}}],null,!0)})],1),e("div",{staticClass:"col-md-4"},[e("validation-provider",{attrs:{name:"Address",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("label",[t._v("Address "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("b-form-input",{attrs:{state:t.getValidationState(n),placeholder:"Enter address"},model:{value:t.editEvent.address1,callback:function(e){t.$set(t.editEvent,"address1",e)},expression:"editEvent.address1"}}),e("b-form-invalid-feedback",[t._v(t._s(n.errors[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-6"},[e("validation-provider",{attrs:{name:"Postcode",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("label",[t._v("Postcode "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("b-form-input",{attrs:{state:t.getValidationState(n),placeholder:"Enter postcode"},model:{value:t.editEvent.postcode,callback:function(e){t.$set(t.editEvent,"postcode",e)},expression:"editEvent.postcode"}}),e("b-form-invalid-feedback",[t._v(t._s(n.errors[0]))])]}}],null,!0)})],1),e("div",{staticClass:"col-md-6"},[e("validation-provider",{attrs:{name:"Country",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("label",[t._v("Country "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("b-form-select",{attrs:{options:t.event_country_details,state:t.getValidationState(n)},model:{value:t.editEvent.country,callback:function(e){t.$set(t.editEvent,"country",e)},expression:"editEvent.country"}}),e("b-form-invalid-feedback",[t._v(t._s(n.errors[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-3"},[e("validation-provider",{attrs:{name:"Start Date",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("label",[t._v("Start Date "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("b-form-input",{attrs:{type:"date",state:t.getValidationState(n)},model:{value:t.editEvent.startDate,callback:function(e){t.$set(t.editEvent,"startDate",e)},expression:"editEvent.startDate"}}),e("b-form-invalid-feedback",[t._v(t._s(n.errors[0]))])]}}],null,!0)})],1),e("div",{ref:"startTimeContainer",staticClass:"col-md-3"},[e("validation-provider",{attrs:{name:"Start Time"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("label",[t._v("Start Time")]),e("div",{staticClass:"custom-time-input-wrapper"},[e("div",{staticClass:"custom-time-input form-control",class:{"is-invalid":n.errors.length>0}},[e("div",{staticClass:"time-segments"},[t.isEditingStartHour?e("input",{directives:[{name:"model",rawName:"v-model",value:t.formattedStartHour,expression:"formattedStartHour"}],ref:"startHourInput",staticClass:"time-input",attrs:{type:"text",inputmode:"numeric"},domProps:{value:t.formattedStartHour},on:{blur:function(e){return t.finishEditing("start","hour")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.finishEditing("start","hour")},input:function(e){e.target.composing||(t.formattedStartHour=e.target.value)}}}):e("span",{staticClass:"time-segment",on:{click:function(e){return t.editTime("start","hour",e)}}},[t._v(t._s(t.formattedStartHour))]),e("span",[t._v(":")]),t.isEditingStartMinute?e("input",{directives:[{name:"model",rawName:"v-model",value:t.formattedStartMinute,expression:"formattedStartMinute"}],ref:"startMinuteInput",staticClass:"time-input",attrs:{type:"text",inputmode:"numeric"},domProps:{value:t.formattedStartMinute},on:{blur:function(e){return t.finishEditing("start","minute")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.finishEditing("start","minute")},input:function(e){e.target.composing||(t.formattedStartMinute=e.target.value)}}}):e("span",{staticClass:"time-segment",on:{click:function(e){return t.editTime("start","minute",e)}}},[t._v(t._s(t.formattedStartMinute))]),e("span",{staticClass:"time-segment period",on:{click:function(e){return t.togglePeriod("start")}}},[t._v(t._s(t.editEvent.startPeriod))])]),e("span",{staticClass:"clock-icon",on:{click:function(e){return e.stopPropagation(),t.toggleTimePicker("start")}}},[t._v("ðŸ•’")])]),t.showStartTimePicker?e("div",{staticClass:"time-picker-overlay"},[e("div",{staticClass:"time-picker-column"},[e("span",{staticClass:"arrow",on:{click:function(e){return t.adjustTime("start","hour",1)}}},[t._v("â–²")]),e("span",{staticClass:"time-value"},[t._v(t._s(t.formattedStartHour))]),e("span",{staticClass:"arrow",on:{click:function(e){return t.adjustTime("start","hour",-1)}}},[t._v("â–¼")])]),e("div",{staticClass:"time-picker-column"},[e("span",{staticClass:"arrow",on:{click:function(e){return t.adjustTime("start","minute",1)}}},[t._v("â–²")]),e("span",{staticClass:"time-value"},[t._v(t._s(t.formattedStartMinute))]),e("span",{staticClass:"arrow",on:{click:function(e){return t.adjustTime("start","minute",-1)}}},[t._v("â–¼")])]),e("div",{staticClass:"time-picker-column"},[e("span",{staticClass:"arrow",on:{click:function(e){return t.togglePeriod("start")}}},[t._v("â–²")]),e("span",{staticClass:"time-value period-value",on:{click:function(e){return t.togglePeriod("start")}}},[t._v(t._s(t.editEvent.startPeriod))]),e("span",{staticClass:"arrow",on:{click:function(e){return t.togglePeriod("start")}}},[t._v("â–¼")])])]):t._e()]),n.errors.length>0?e("b-form-invalid-feedback",[t._v(t._s(n.errors[0]))]):t._e()]}}],null,!0)})],1),e("div",{staticClass:"col-md-3"},[e("validation-provider",{attrs:{name:"End Date",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("label",[t._v("End Date "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("b-form-input",{attrs:{type:"date",state:t.getValidationState(n)},model:{value:t.editEvent.endDate,callback:function(e){t.$set(t.editEvent,"endDate",e)},expression:"editEvent.endDate"}}),e("b-form-invalid-feedback",[t._v(t._s(n.errors[0]))])]}}],null,!0)})],1),e("div",{ref:"endTimeContainer",staticClass:"col-md-3"},[e("validation-provider",{attrs:{name:"End Time"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("label",[t._v("End Time")]),e("div",{staticClass:"custom-time-input-wrapper"},[e("div",{staticClass:"custom-time-input form-control",class:{"is-invalid":n.errors.length>0}},[e("div",{staticClass:"time-segments"},[t.isEditingEndHour?e("input",{directives:[{name:"model",rawName:"v-model",value:t.formattedEndHour,expression:"formattedEndHour"}],ref:"endHourInput",staticClass:"time-input",attrs:{type:"text",inputmode:"numeric"},domProps:{value:t.formattedEndHour},on:{blur:function(e){return t.finishEditing("end","hour")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.finishEditing("end","hour")},input:function(e){e.target.composing||(t.formattedEndHour=e.target.value)}}}):e("span",{staticClass:"time-segment",on:{click:function(e){return t.editTime("end","hour",e)}}},[t._v(t._s(t.formattedEndHour))]),e("span",[t._v(":")]),t.isEditingEndMinute?e("input",{directives:[{name:"model",rawName:"v-model",value:t.formattedEndMinute,expression:"formattedEndMinute"}],ref:"endMinuteInput",staticClass:"time-input",attrs:{type:"text",inputmode:"numeric"},domProps:{value:t.formattedEndMinute},on:{blur:function(e){return t.finishEditing("end","minute")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.finishEditing("end","minute")},input:function(e){e.target.composing||(t.formattedEndMinute=e.target.value)}}}):e("span",{staticClass:"time-segment",on:{click:function(e){return t.editTime("end","minute",e)}}},[t._v(t._s(t.formattedEndMinute))]),e("span",{staticClass:"time-segment period",on:{click:function(e){return t.togglePeriod("end")}}},[t._v(t._s(t.editEvent.endPeriod))])]),e("span",{staticClass:"clock-icon",on:{click:function(e){return e.stopPropagation(),t.toggleTimePicker("end")}}},[t._v("ðŸ•’")])]),t.showEndTimePicker?e("div",{staticClass:"time-picker-overlay"},[e("div",{staticClass:"time-picker-column"},[e("span",{staticClass:"arrow",on:{click:function(e){return t.adjustTime("end","hour",1)}}},[t._v("â–²")]),e("span",{staticClass:"time-value"},[t._v(t._s(t.formattedEndHour))]),e("span",{staticClass:"arrow",on:{click:function(e){return t.adjustTime("end","hour",-1)}}},[t._v("â–¼")])]),e("div",{staticClass:"time-picker-column"},[e("span",{staticClass:"arrow",on:{click:function(e){return t.adjustTime("end","minute",1)}}},[t._v("â–²")]),e("span",{staticClass:"time-value"},[t._v(t._s(t.formattedEndMinute))]),e("span",{staticClass:"arrow",on:{click:function(e){return t.adjustTime("end","minute",-1)}}},[t._v("â–¼")])]),e("div",{staticClass:"time-picker-column"},[e("span",{staticClass:"arrow",on:{click:function(e){return t.togglePeriod("end")}}},[t._v("â–²")]),e("span",{staticClass:"time-value period-value",on:{click:function(e){return t.togglePeriod("end")}}},[t._v(t._s(t.editEvent.endPeriod))]),e("span",{staticClass:"arrow",on:{click:function(e){return t.togglePeriod("end")}}},[t._v("â–¼")])])]):t._e()]),n.errors.length>0?e("b-form-invalid-feedback",[t._v(t._s(n.errors[0]))]):t._e()]}}],null,!0)})],1)]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-12"},[e("label",[t._v("Event Description")]),e("b-form-textarea",{attrs:{rows:"3",placeholder:"Enter event description"},model:{value:t.editEvent.description,callback:function(e){t.$set(t.editEvent,"description",e)},expression:"editEvent.description"}})],1)]),e("div",{staticClass:"mt-4 d-flex justify-content-between"},[e("b-button",{attrs:{variant:"secondary",disabled:t.isLoading},on:{click:t.closeEdit}},[t._v("Cancel")]),e("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.isLoading}},[t.isLoading?e("span",[t._v("Updating...")]):e("span",[t._v("Update")])])],1)])],1)]}}],null,!1,2985630105)})],1):t._e()},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-md-6"},[e("h4",{staticClass:"mb-0"},[t._v("Event Details")])])}],r=n("53ca"),s=n("2909"),o=n("3835"),d=n("c7eb"),c=n("1da1"),u=(n("14d9"),n("a15b9"),n("4d90"),n("ac1f"),n("00b4"),n("a9e3"),n("d3b7"),n("3ca3"),n("ddb0"),n("7db0"),n("d81d"),n("99af"),n("fb6a"),n("4de4"),n("471e")),l=n("323e"),v=n.n(l),p={data:function(){return{event:null,editEvent:{organisation_sys_id:null,name:"",type:"",category:null,venue:"",address1:"",postcode:"",startDate:"",startTime:"",startHour:8,startMinute:30,startPeriod:"AM",endDate:"",endTime:"",endHour:5,endMinute:0,endPeriod:"PM",description:"",country:null},isEditingStartHour:!1,isEditingStartMinute:!1,isEditingEndHour:!1,isEditingEndMinute:!1,showStartTimePicker:!1,showEndTimePicker:!1,isLoading:!1,isEventCategoryApiCalled:!1,isCountryApiCalled:!1,mapError:!1,showEditModal:!1,event_category_details:[{value:null,text:"Select Category"}],event_country_details:[{value:null,text:"Select Country"}],user_sys_id:null}},computed:{dynamicFullAddress:function(){var t,e,n,a=[];return null!==(t=this.event)&&void 0!==t&&t.address1&&a.push(this.event.address1),null!==(e=this.event)&&void 0!==e&&e.countryName&&"-"!==this.event.countryName&&a.push(this.event.countryName),null!==(n=this.event)&&void 0!==n&&n.postcode&&a.push(this.event.postcode),a.length>0?a.join(", "):"-"},googleMapsEmbedUrl:function(){var t=this.dynamicFullAddress;return t&&"-"!==t?"https://www.google.com/maps?q=".concat(encodeURIComponent(t),"&output=embed"):"https://www.google.com/maps?q=Singapore&output=embed"},googleMapsSearchUrl:function(){var t=this.dynamicFullAddress;return t&&"-"!==t?"https://www.google.com/maps/search/".concat(encodeURIComponent(t)):"https://www.google.com/maps/search/Singapore"},formattedStartHour:{get:function(){return String(this.editEvent.startHour).padStart(2,"0")},set:function(t){/^\d{1,2}$/.test(t)&&(this.editEvent.startHour=Number(t))}},formattedStartMinute:{get:function(){return String(this.editEvent.startMinute).padStart(2,"0")},set:function(t){/^\d{1,2}$/.test(t)&&(this.editEvent.startMinute=Number(t))}},formattedEndHour:{get:function(){return String(this.editEvent.endHour).padStart(2,"0")},set:function(t){/^\d{1,2}$/.test(t)&&(this.editEvent.endHour=Number(t))}},formattedEndMinute:{get:function(){return String(this.editEvent.endMinute).padStart(2,"0")},set:function(t){/^\d{1,2}$/.test(t)&&(this.editEvent.endMinute=Number(t))}}},mounted:function(){var t=this;return Object(c["a"])(Object(d["a"])().mark((function e(){var n,a;return Object(d["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=localStorage.getItem("userInfo"),n&&(t.user_sys_id=JSON.parse(n)),a=localStorage.getItem("selectedEventSysId"),!a){e.next=6;break}return e.next=6,t.initializeData(a);case 6:document.addEventListener("click",t.handleClickOutside);case 7:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){document.removeEventListener("click",this.handleClickOutside)},methods:{initializeData:function(t){var e=this;return Object(c["a"])(Object(d["a"])().mark((function n(){var a,i,r;return Object(d["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return v.a.start(),n.prev=1,n.next=4,e.getSpecificEvent(t);case 4:if(null===(a=e.event)||void 0===a||!a.organisation_sys_id){n.next=11;break}return n.next=7,Promise.all([e.getEventCategoryInfo(e.event.organisation_sys_id),e.getCountryDetailsInfo(e.event.organisation_sys_id)]);case 7:e.event.categoryName&&"-"!==e.event.categoryName&&(i=e.event_category_details.find((function(t){return t.text===e.event.categoryName})),i&&(e.event.category=i.value)),e.event.countryName&&"-"!==e.event.countryName&&(r=e.event_country_details.find((function(t){return t.text===e.event.countryName})),r&&(e.event.country=r.value)),console.log("After matching - Event category ID:",e.event.category),console.log("After matching - Event country ID:",e.event.country);case 11:n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](1),console.error("Error initializing data:",n.t0);case 16:return n.prev=16,v.a.done(),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[1,13,16,19]])})))()},onMapError:function(){this.mapError=!0},openInGoogleMaps:function(){"-"!==this.dynamicFullAddress&&window.open(this.googleMapsSearchUrl,"_blank")},getValidationState:function(t){var e=t.dirty,n=t.validated,a=t.valid,i=void 0===a?null:a;return e||n?i:null},formatDate:function(t){if(!t)return"-";var e=t.split("-").map(Number),n=Object(o["a"])(e,3),a=n[0],i=n[1],r=n[2],s=new Date(a,i-1,r),d={weekday:"short",month:"short",day:"numeric",year:"numeric"};return s.toLocaleDateString("en-US",d)},toggleTimePicker:function(t){"start"===t?(this.showStartTimePicker=!this.showStartTimePicker,this.showEndTimePicker=!1):(this.showEndTimePicker=!this.showEndTimePicker,this.showStartTimePicker=!1)},adjustTime:function(t,e,n){var a="start"===t?"start":"end",i="hour"===e?"Hour":"Minute",r="".concat(a).concat(i),s=this.editEvent[r];if("hour"===e){var o=s+n;o>12&&(o=1),o<1&&(o=12),this.editEvent[r]=o}else{var d=s+n;d>59&&(d=0),d<0&&(d=59),this.editEvent[r]=d}"start"===t?this.updateStartTime():this.updateEndTime()},handleClickOutside:function(t){this.$refs.startTimeContainer&&!this.$refs.startTimeContainer.contains(t.target)&&(this.showStartTimePicker=!1),this.$refs.endTimeContainer&&!this.$refs.endTimeContainer.contains(t.target)&&(this.showEndTimePicker=!1)},editTime:function(t,e){var n,a,i=this;"start"===t?(a="hour"===e?"isEditingStartHour":"isEditingStartMinute",n="hour"===e?"startHourInput":"startMinuteInput"):(a="hour"===e?"isEditingEndHour":"isEditingEndMinute",n="hour"===e?"endHourInput":"endMinuteInput"),this[a]=!0,this.$nextTick((function(){var t;return null===(t=i.$refs[n])||void 0===t?void 0:t.focus()}))},finishEditing:function(t,e){var n=t.charAt(0).toUpperCase()+t.slice(1),a=e.charAt(0).toUpperCase()+e.slice(1),i="formatted".concat(n).concat(a),r="".concat(t).concat(a),s="isEditing".concat(n).concat(a),o=parseInt(this[i],10);"hour"===e?(isNaN(o)||o<1||o>12)&&(o=12):(isNaN(o)||o<0||o>59)&&(o=59),this.editEvent[r]=o,this[s]=!1,"start"===t?this.updateStartTime():this.updateEndTime()},togglePeriod:function(t){var e="".concat(t,"Period");this.editEvent[e]="AM"===this.editEvent[e]?"PM":"AM","start"===t?this.updateStartTime():this.updateEndTime()},updateTime:function(t){var e=this.editEvent["".concat(t,"Hour")],n=this.editEvent["".concat(t,"Period")];"PM"===n&&e<12?e+=12:"AM"===n&&12===e&&(e=0),this.editEvent["".concat(t,"Time")]="".concat(String(e).padStart(2,"0"),":").concat(String(this.editEvent["".concat(t,"Minute")]).padStart(2,"0"))},updateStartTime:function(){this.updateTime("start")},updateEndTime:function(){this.updateTime("end")},parseTimeToDropdowns:function(t,e){if(t){var n=t.split(":").map(Number),a=Object(o["a"])(n,2),i=a[0],r=a[1],s=i>=12?"PM":"AM",d=i%12||12,c=e?"start":"end";this.editEvent["".concat(c,"Hour")]=d,this.editEvent["".concat(c,"Minute")]=r,this.editEvent["".concat(c,"Period")]=s}},openEdit:function(){var t=this;return Object(c["a"])(Object(d["a"])().mark((function e(){return Object(d["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:v.a.start();try{console.log("Opening edit form"),console.log("Event category ID:",t.event.category),console.log("Event country ID:",t.event.country),console.log("Available categories:",t.event_category_details),console.log("Available countries:",t.event_country_details),t.editEvent={organisation_sys_id:t.event.organisation_sys_id,name:t.event.name,type:t.event.type,category:Number(t.event.category),venue:t.event.venue,address1:t.event.address1,postcode:t.event.postcode,startDate:t.event.startDate,startTime:t.event.startTime,endDate:t.event.endDate,endTime:t.event.endTime,description:t.event.description,country:Number(t.event.country)},console.log("Edit event data set:",t.editEvent),t.parseTimeToDropdowns(t.event.startTime,!0),t.parseTimeToDropdowns(t.event.endTime,!1),t.showEditModal=!0}finally{v.a.done()}case 2:case"end":return e.stop()}}),e)})))()},ensureDropdownDataLoaded:function(t){var e=this;return Object(c["a"])(Object(d["a"])().mark((function n(){var a;return Object(d["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=[],e.isEventCategoryApiCalled||a.push(e.getEventCategoryInfo(t)),e.isCountryApiCalled||a.push(e.getCountryDetailsInfo(t)),!(a.length>0)){n.next=6;break}return n.next=6,Promise.all(a);case 6:case"end":return n.stop()}}),n)})))()},getSpecificEvent:function(t){var e=this;return Object(c["a"])(Object(d["a"])().mark((function n(){var a,i;return Object(d["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.isLoading=!0,n.prev=1,n.next=4,e.$apiCall.get(e.$apiBus.api_get_specific_event_info,{params:{ITEM:"SPECIFIC",EVENT_SYS_ID:t}});case 4:a=n.sent,"true"===a.status&&a.response.length?(i=a.response[0],e.event={id:i.EVENT_SYS_ID,organisation_sys_id:i.ORGANIZATION_SYS_ID,name:i.EVENT_NAME||"",type:i.EVENT_TYPE||"",category:i.EVENT_CATEGORY_SYS_ID,categoryName:i.EVENT_CATEGORY||"-",venue:i.EVENT_VENUE||"",address1:i.EVENT_PRIMARY_ADDRESS||"",postcode:i.EVENT_POSTCODE||"",startDate:i.EVENT_START_DATE||"",startTime:i.EVENT_START_TIME||"",endDate:i.EVENT_END_DATE||"",endTime:i.EVENT_END_TIME||"",description:i.ABOUT_THE_EVENT||"",country:i.EVENT_COUNTRY_SYS_ID,countryName:i.EVENT_COUNTRY||"-"},console.log("Event loaded:",e.event)):(e.event=null,u["a"].showErrorAlert(!0,"error",a.response||"Event not found")),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](1),console.error("Error loading event:",n.t0),u["a"].showErrorAlert(!0,"error","Error loading event");case 12:return n.prev=12,e.isLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[1,8,12,15]])})))()},getEventCategoryInfo:function(t){var e=this;return Object(c["a"])(Object(d["a"])().mark((function n(){var a,i,o,c;return Object(d["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(!e.isEventCategoryApiCalled){n.next=4;break}return n.abrupt("return");case 4:return n.prev=4,a={ITEM:"VIEW_ALL",ORGANIZATION_SYS_ID:t},n.next=8,e.$apiCall.get(e.$apiBus.api_get_eventcategory_info,{params:a});case 8:i=n.sent,"true"===i.status&&(e.isEventCategoryApiCalled=!0,e.event_category_details=[{value:null,text:"Select Category"}].concat(Object(s["a"])(i.response.filter((function(t){return"ACTIVE"===t.STATUS})).map((function(t){return{value:parseInt(t.EVENT_CATEGORY_SYS_ID),text:t.EVENT_CATEGORY}})))),console.log("Categories loaded:",e.event_category_details),console.log("Event category to match:",null===(o=e.event)||void 0===o?void 0:o.category,"Type:",Object(r["a"])(null===(c=e.event)||void 0===c?void 0:c.category))),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](4),console.error("Error loading event categories:",n.t0);case 15:case"end":return n.stop()}}),n,null,[[4,12]])})))()},getCountryDetailsInfo:function(t){var e=this;return Object(c["a"])(Object(d["a"])().mark((function n(){var a,i,o,c;return Object(d["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(!e.isCountryApiCalled){n.next=4;break}return n.abrupt("return");case 4:return n.prev=4,a={ITEM:"VIEW_ALL",ORGANIZATION_SYS_ID:t},n.next=8,e.$apiCall.get(e.$apiBus.api_get_country_info,{params:a});case 8:i=n.sent,"true"===i.status&&(e.isCountryApiCalled=!0,e.event_country_details=[{value:null,text:"Select Country"}].concat(Object(s["a"])(i.response.map((function(t){return{value:parseInt(t.COUNTRY_SYS_ID),text:t.COUNTRY_NAME}})))),console.log("Countries loaded:",e.event_country_details),console.log("Event country to match:",null===(o=e.event)||void 0===o?void 0:o.country,"Type:",Object(r["a"])(null===(c=e.event)||void 0===c?void 0:c.country))),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](4),console.error("Error loading countries:",n.t0);case 15:case"end":return n.stop()}}),n,null,[[4,12]])})))()},closeEdit:function(){this.isLoading||(this.showEditModal=!1)},getCategoryTextById:function(t){var e;return(null===(e=this.event_category_details.find((function(e){return e.value==t})))||void 0===e?void 0:e.text)||""},getCountryTextById:function(t){var e;return(null===(e=this.event_country_details.find((function(e){return e.value==t})))||void 0===e?void 0:e.text)||""},updateEvent:function(){var t=this;return Object(c["a"])(Object(d["a"])().mark((function e(){var n,a,i,r,s;return Object(d["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,v.a.start(),e.prev=2,a=t.getCategoryTextById(t.editEvent.category),i=t.getCountryTextById(t.editEvent.country),r={ITEM:"UPDATE",EVENT_SYS_ID:t.event.id,CREATED_BY:null===(n=t.user_sys_id)||void 0===n?void 0:n.USER_SYS_ID,EVENT_NAME:t.editEvent.name,EVENT_TYPE:t.editEvent.type,EVENT_CATEGORY:a,EVENT_CATEGORY_SYS_ID:t.editEvent.category,EVENT_VENUE:t.editEvent.venue,EVENT_PRIMARY_ADDRESS:t.editEvent.address1,EVENT_POSTCODE:t.editEvent.postcode,EVENT_START_DATE:t.editEvent.startDate,EVENT_START_TIME:t.editEvent.startTime,EVENT_END_DATE:t.editEvent.endDate,EVENT_END_TIME:t.editEvent.endTime,ABOUT_THE_EVENT:t.editEvent.description,EVENT_COUNTRY:i,EVENT_COUNTRY_SYS_ID:t.editEvent.country},console.log("Updating event with payload:",r),e.next=9,t.$apiCall.post(t.$apiBus.api_post_add_update_event,r);case 9:if(s=e.sent,"true"!==s.status){e.next=17;break}return e.next=13,t.getSpecificEvent(t.event.id);case 13:t.closeEdit(),u["a"].showSuccessAlert("Success!","Event updated successfully.","success"),e.next=18;break;case 17:u["a"].showErrorAlert(!0,"error",s.response||"Update failed");case 18:e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](2),console.error("Error updating event:",e.t0),u["a"].showErrorAlert(!0,"error","An error occurred during the update.");case 24:return e.prev=24,t.isLoading=!1,v.a.done(),e.finish(24);case 28:case"end":return e.stop()}}),e,null,[[2,20,24,28]])})))()}}},m=p,f=(n("870a"),n("2877")),E=Object(f["a"])(m,a,i,!1,null,"7d4e64a9",null);e["default"]=E.exports},"870a":function(t,e,n){"use strict";n("8ac0")},"8ac0":function(t,e,n){}}]);