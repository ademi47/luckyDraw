(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e6fd05cc"],{"3c65":function(e,s,t){"use strict";var a=t("23e7"),i=t("7b0b"),n=t("07fa"),r=t("3a34"),o=t("083a"),l=t("3511"),c=1!==[].unshift(0),u=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},_=c||!u();a({target:"Array",proto:!0,arity:1,forced:_},{unshift:function(e){var s=i(this),t=n(s),a=arguments.length;if(a){l(t+a);var c=t;while(c--){var u=c+a;c in s?s[u]=s[c]:o(s,u)}for(var _=0;_<a;_++)s[_]=arguments[_]}return r(s,t+a)}})},"7d22":function(e,s,t){},c7d3:function(e,s,t){"use strict";t("7d22")},ff34:function(e,s,t){"use strict";t.r(s);t("b0c0");var a=function(){var e=this,s=e._self._c;return s("div",[s("div",[s("main",{staticClass:"p-4"},[s("b-row",[s("b-col",{staticClass:"mb-3",attrs:{cols:"12"}},[s("b-nav",{attrs:{pills:""}},e._l(e.sidebarLinks,(function(t){return s("b-nav-item",{key:t.name,attrs:{href:"#",active:e.activeLink===t.name},on:{click:function(s){return e.setActiveLink(t.name)}}},[e._v(" "+e._s(t.text)+" ")])})),1)],1),"add"===e.activeLink?s("b-col",{attrs:{cols:"12"}},[s("b-card",{staticClass:"message-form-card mb-4"},[s("h5",{staticClass:"mb-3"},[e._v("Add Your Message")]),s("b-form",{on:{submit:function(s){return s.preventDefault(),e.submitMessage.apply(null,arguments)}}},[s("b-form-group",{attrs:{label:"Name","label-for":"input-name"}},[s("b-form-input",{attrs:{id:"input-name",placeholder:"Enter your name",required:""},model:{value:e.newMessage.name,callback:function(s){e.$set(e.newMessage,"name",s)},expression:"newMessage.name"}})],1),s("b-form-group",{staticClass:"mb-4",attrs:{label:"Message","label-for":"input-message"}},[s("b-form-textarea",{attrs:{id:"input-message",placeholder:"Enter your message",rows:"4",required:""},model:{value:e.newMessage.message,callback:function(s){e.$set(e.newMessage,"message",s)},expression:"newMessage.message"}})],1),s("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit Message")])],1)],1),e.submittedMessages.length>0?s("div",{staticClass:"submitted-messages"},[s("h5",{staticClass:"mb-3"},[e._v("Your Submitted Messages")]),e._l(e.submittedMessages,(function(t){return s("b-card",{key:t.id,staticClass:"message-card mb-3"},[s("div",{staticClass:"d-flex justify-content-between align-items-start"},[s("div",{staticClass:"flex-grow-1"},[s("div",{staticClass:"message-author"},[s("strong",[e._v(e._s(t.name))]),s("span",{staticClass:"time"},[e._v(e._s(t.time))])]),s("p",{staticClass:"message-text mb-0"},[e._v(e._s(t.message))])]),s("div",{staticClass:"status-badge"},[s("span",{staticClass:"badge badge-warning"},[e._v("Pending Approval")])])])])}))],2):e._e()],1):e._e(),"add"!==e.activeLink?s("b-col",{attrs:{cols:"12"}},[s("div",{staticClass:"messages-feed"},[0===e.messages.length?s("div",{staticClass:"no-messages"},[s("p",[e._v("No messages found")])]):e._e(),e._l(e.messages,(function(t){return s("b-card",{key:t.id,staticClass:"message-card mb-3"},[s("div",{staticClass:"d-flex justify-content-between align-items-start"},[s("div",{staticClass:"flex-grow-1"},[s("div",{staticClass:"message-author"},[s("strong",[e._v(e._s(t.name))]),s("span",{staticClass:"time"},[e._v(e._s(t.time))])]),s("p",{staticClass:"message-text mb-0"},[e._v(e._s(t.message))])]),s("div",{staticClass:"message-actions d-flex flex-column align-items-end"},["waiting"===e.activeLink?s("div",{staticClass:"d-flex gap-2"},[s("div",{staticClass:"icon-wrapper approve-icon",attrs:{title:"Approve"},on:{click:function(s){return e.approveMessage(t.id)}}},[s("svg",{staticClass:"action-icon",attrs:{viewBox:"0 0 24 24"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"10",fill:"#4CAF50",opacity:"0.2"}}),s("path",{attrs:{fill:"#4CAF50",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}})])]),s("div",{staticClass:"icon-wrapper reject-icon",attrs:{title:"Reject"},on:{click:function(s){return e.rejectMessage(t.id)}}},[s("svg",{staticClass:"action-icon",attrs:{viewBox:"0 0 24 24"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"10",fill:"#FF5252",opacity:"0.2"}}),s("path",{attrs:{fill:"#FF5252",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}})])])]):e._e(),"approved"===e.activeLink?s("div",{staticClass:"d-flex flex-column gap-2"}):e._e(),"rejected"===e.activeLink?s("div",[s("div",{staticClass:"icon-wrapper unreject-icon",attrs:{title:"Unreject"},on:{click:function(s){return e.unrejectMessage(t.id)}}},[s("svg",{staticClass:"action-icon",attrs:{viewBox:"0 0 24 24"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"10",fill:"#8BC34A",opacity:"0.2"}}),s("path",{attrs:{fill:"#8BC34A",d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z"}})])])]):e._e()])])])}))],2)]):e._e()],1)],1)])])},i=[],n=(t("d81d"),t("3c65"),t("4de4"),t("d3b7"),{name:"WishingWall",data:function(){return{messages:[],submittedMessages:[],activeLink:"waiting",newMessage:{name:"",message:""},sidebarLinks:[{name:"waiting",text:"Waiting For Approval"},{name:"approved",text:"Approved"},{name:"rejected",text:"Rejected"},{name:"add",text:"Add Message"}]}},mounted:function(){this.event_sys_id=JSON.parse(localStorage.getItem("selectedEventSysId")),this.getWishingWallList()},methods:{getWishingWallList:function(){var e=this,s={ITEM:"VIEW_ALL",EVENT_SYS_ID:this.event_sys_id};this.$apiCall.get(this.$apiBus.api_get_wishing_wall_list,{params:s}).then((function(s){s.status&&"true"===s.status?e.messages=s.response.map((function(s){return{id:s.WISHING_MESSAGE_SYS_ID,name:s.WISHED_BY||"Anonymous",message:s.WISHING_MESSAGE,time:e.formatTime(s.CREATED_DATE)}})):e.messages=[]})).catch((function(s){e.messages=[],console.error("API call failed:",s)}))},getApprovedList:function(){var e=this,s={ITEM:"VIEW_APPROVED",EVENT_SYS_ID:this.event_sys_id};this.$apiCall.get(this.$apiBus.api_get_wishing_wall_list,{params:s}).then((function(s){s.status&&"true"===s.status?e.messages=s.response.map((function(s){return{id:s.WISHING_MESSAGE_SYS_ID,name:s.WISHED_BY||"Anonymous",message:s.WISHING_MESSAGE,time:e.formatTime(s.CREATED_DATE)}})):e.messages=[]})).catch((function(s){e.messages=[],console.error("API call failed:",s)}))},getRejectedList:function(){var e=this,s={ITEM:"VIEW_REJECTED",EVENT_SYS_ID:this.event_sys_id};this.$apiCall.get(this.$apiBus.api_get_wishing_wall_list,{params:s}).then((function(s){s.status&&"true"===s.status?e.messages=s.response.map((function(s){return{id:s.WISHING_MESSAGE_SYS_ID,name:s.WISHED_BY||"Anonymous",message:s.WISHING_MESSAGE,time:e.formatTime(s.CREATED_DATE)}})):e.messages=[]})).catch((function(s){e.messages=[],console.error("API call failed:",s)}))},formatTime:function(e){if(!e)return"a few moments ago";try{var s=new Date(e);return isNaN(s.getTime())?"Invalid Date":s.toLocaleString()}catch(t){return"Invalid Date"}},setActiveLink:function(e){this.activeLink=e,this.messages=[],"waiting"===e?this.getWishingWallList():"approved"===e?this.getApprovedList():"rejected"===e&&this.getRejectedList()},submitMessage:function(){var e=this,s={ITEM:"ADD_UPDATE",WISHING_MESSAGE_SYS_ID:"0",EVENT_SYS_ID:this.event_sys_id,WISHING_MESSAGE:this.newMessage.message,WISHED_BY:this.newMessage.name,IS_WAITING_FOR_APPROVAL:"1",CREATED_BY:1};this.$apiCall.post(this.$apiBus.api_post_add_update_wishing_wall,s).then((function(s){"true"===s.status?(e.submittedMessages.unshift({id:Date.now(),name:e.newMessage.name,message:e.newMessage.message,time:e.formatTime((new Date).toISOString())}),e.newMessage.name="",e.newMessage.message="",console.log("Message submitted successfully!")):Global.showErrorAlert(!0,"error",s.response)})).catch((function(e){console.error("API call failed:",e),Global.showErrorAlert(!0,"error","Failed to submit message")}))},approveMessage:function(e){var s=this,t={ITEM:"UPDATE_APPROVED",WISHING_MESSAGE_SYS_ID:e,EVENT_SYS_ID:this.event_sys_id,IS_APPROVED:"1",IS_WAITING_FOR_APPROVAL:"0",IS_REJECTED:"0",CREATED_BY:1};this.$apiCall.post(this.$apiBus.api_post_add_update_wishing_wall,t).then((function(t){"true"===t.status?(s.messages=s.messages.filter((function(s){return s.id!==e})),console.log("Message approved successfully!")):Global.showErrorAlert(!0,"error",t.response)})).catch((function(e){console.error("API call failed:",e)}))},rejectMessage:function(e){var s=this,t={ITEM:"UPDATE_REJECTED",WISHING_MESSAGE_SYS_ID:e,EVENT_SYS_ID:this.event_sys_id,IS_REJECTED:"1",IS_APPROVED:"0",IS_WAITING_FOR_APPROVAL:"0",CREATED_BY:1};this.$apiCall.post(this.$apiBus.api_post_add_update_wishing_wall,t).then((function(t){"true"===t.status?(s.messages=s.messages.filter((function(s){return s.id!==e})),console.log("Message rejected!")):Global.showErrorAlert(!0,"error",t.response)})).catch((function(e){console.error("API call failed:",e)}))},unrejectMessage:function(e){var s=this,t={ITEM:"UPDATE_APPROVED",WISHING_MESSAGE_SYS_ID:e,EVENT_SYS_ID:this.event_sys_id,IS_APPROVED:"1",IS_REJECTED:"0",IS_WAITING_FOR_APPROVAL:"0",CREATED_BY:1};this.$apiCall.post(this.$apiBus.api_post_add_update_wishing_wall,t).then((function(t){"true"===t.status?(s.messages=s.messages.filter((function(s){return s.id!==e})),console.log("Message moved to approved!")):Global.showErrorAlert(!0,"error",t.response)})).catch((function(e){console.error("API call failed:",e)}))},deleteMessage:function(e){var s=this,t={ITEM:"DELETE",EVENT_SYS_ID:this.event_sys_id,WISHING_MESSAGE_SYS_ID:e};this.$apiCall.post(this.$apiBus.api_post_add_update_wishing_wall,t).then((function(t){"true"===t.status?(s.messages=s.messages.filter((function(s){return s.id!==e})),console.log("Message deleted successfully!")):Global.showErrorAlert(!0,"error",t.response)})).catch((function(e){console.error("API call failed:",e)}))}}}),r=n,o=(t("c7d3"),t("2877")),l=Object(o["a"])(r,a,i,!1,null,"13100fe9",null);s["default"]=l.exports}}]);